### PointNet++: Deep Hierarchical Feature Learning on Point Sets in a Metric Space(2017)

> 论文地址:https://arxiv.org/pdf/1706.02413.pdf
>
> 代码地址:https://github.com/charlesq34/pointnet2

### Abstract

`PointNet`存在的问题：无法提取局部结构,这使得它很难对复杂场景进行分析。在`PointNet++`中，作者通过两个主要的方法来进行改进，使得网络能更好的提取局部特征。第一，利用`空间距离（metric space distances）`，使用`PointNet`对点集局部区域进行特征迭代提取，使其能够学到局部尺度越来越大的特征。第二，点的下采样总是以不均匀的密度进行，但是如果在均匀密度上训练，就会使得网络性能变差，所以作者提出了一种`自适应密度`的特征提取方法。通过以上两种方法，能够更高效的学习特征，也更有鲁棒性。

### Introduction

本文引入了一个名为`PointNet++`的`分层`神经网络，以分层方式处理在度量空间中采样的一组点。`PointNet++`的做法很简单。首先根据基础空间`(underlying space)`的距离度量将点集划分为重叠的局部区域。与CNN类似，本文从小邻域内提取局部特征,捕获精细的几何结构；这些局部特征被进一步分组为更大的单元，并进行处理以产生更高级别的特征。重复的这个过程,直到获得整个点集的特征。

PointNet++要解决的两个问题:如何对点集`分区`，以及如何利用`特征提取器`获取不同区域的`局部特征`.这两个问题实际上是`相关`的，要想通过特征提取器对不同的区域进行特征提取，需要每个分区具有相同的结构。这里同样可以类比`CNN`来理解，在CNN中，`卷积块`作为基本的特征提取器，对应的区域都是`n x n`的像素区域。而在3D点集当中，同样需要找到结构相同的子区域，和对应的区域特征提取器。

在本文中，作者使用了`PointNet`作为特征提取器，另外一个问题就是如何来划分点集从而产生结构相同的区域。作者使`邻域球`来定义分区，或者也可以叫做`patch`，每个区域可以通过中心坐标和半径来确定。中心坐标的选取使用`FPS`下采样。**区域半径的选择是一个比较有挑战性的事情**，因为输入点集是不均匀的，同时区域特征会存在重叠或被遗忘的情况。尽管在VGG当中提到，CNN使用小的卷积核效果比较好，但这是由于图像是网格化的，每个区域是非常规整的，如果`PointNet++`使用小的半径，网络性能反而很差。这里可以从直观上想象一下，邻域球过小，可能意味着可能看不到`足够完整`的局部特征。这个过程可是使用`KNN`实现。

### Architecture

本文是在`PointNet`基础上增加了层次化结构，使得网络能够在越来越大的区域上提供更高级别的特征。

![architecture](https://cdn.jsdelivr.net/gh/prannt99/blog/img/WeChat13016ec9d5ce09e340a0f5c3bc0b7987.png)

层次化网络是由许多`SA`层组成的.`SA`包括`采样`、`分组`和`PointNet`。

> `采样`从输入点中选择一组点作为中心点,以定义局部区域的质心，具体过程如下：
>
> - 使用FPS选择N'个点，FPS能更好的的覆盖整个点集。具体选择多少个中心点，数量怎么确定，是由人来指定的。
>
> `分组`在质心周围找到相邻点来构造局部区域，具体过程如下:
>
> - 使用`Ball query`方法生成`N'`个局部区域,根据论文中的意思，这里有两个变量，一个是每个区域中点的数量`K`，另一个是球的`半径`。这里`半径`应该是占主导的，会在某个半径的球内找点，上限是`K`。球的半径和每个区域中点的数量都是人指定的。这一步也可以使用`KNN`来进行，而且两者的对于结果的影响并不大。
>
> | KNN(K = 16) | KNN(K = 64) | radius(r = 0.1) | radius(r = 0.2) |
> | :---------: | :---------: | :-------------: | :-------------: |
> |    89.3     |    90.3     |      89.1       |      90.7       |
>
> `PointNet`将局部区域编码为特征向量

SA层的输入为`N x (d + C)`，输出为`N' x (d + C')`，其中`N`是输入点的数量，`N'`是输出点的数量,`d`是坐标维度，`C`是特征维度,`C'`是新的特征维度。
